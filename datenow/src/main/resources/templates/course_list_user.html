<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"xmlns:th="http://www.thymeleaf.org" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ì‚¬ìš©ìí”½ ì½”ìŠ¤ ëª©ë¡</title>
  <link rel="stylesheet" th:href="@{/css/course_list.css}" />
  <link rel="stylesheet" th:href="@{/css/header.css}">
  <link rel="stylesheet" th:href="@{/css/footer.css}"/>
</head>
<body>
<div th:replace="~{fragments/header :: header}"></div>
<div class="course-list-container">
  <h1>ì‚¬ìš©ìí”½ ì½”ìŠ¤ ëª©ë¡</h1>
  <div class="course-list" id="courseList">
    <!-- JSë¡œ ì½”ìŠ¤ ì¹´ë“œê°€ ë Œë”ë§ë©ë‹ˆë‹¤ -->
  </div>
</div>
<div th:replace="~{fragments/footer :: footer}"></div>
</body>
</html>
<script>
  const courseList = document.getElementById('courseList');

  fetch('/api/recommend-courses')
  .then(response => {
    if (!response.ok) throw new Error("ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤");
    return response.json();
  })
  .then(courses => {
    courses.forEach(course => {
      const card = document.createElement('div');
      card.className = 'course-card';
      card.onclick = () => {
        window.location.href = `/recommend-courses/${course.courseId}`;
      };

      card.innerHTML = `
        <img src="${course.imageurl}" alt="${course.title} ì¸ë„¤ì¼" />
        <div class="course-card-content">
          <div class="course-title">${course.title}</div>
          <div class="card-author">
            <div class="author-avatar" style="background-image:url('/images/user.jpg');"></div>
          <div class="course-instructor">${course.creatorNickname}</div>
          </div>
          <div class="card-footer">
          <div class ="card-stats">â¤ï¸ ${course.favoriteCnt}</div>
          <div class ="card-stats">ğŸ’¬ ${course.reviewCnt}</div>
        </div>
        </div>
      `;
      courseList.appendChild(card);
    });
  })
  .catch(error => {
    console.error('ì—ëŸ¬ ë°œìƒ:', error);
    courseList.innerHTML = '<p>ì½”ìŠ¤ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.</p>';
  });
</script>
